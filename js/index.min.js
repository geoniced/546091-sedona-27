var popover=document.querySelector(".booking-popover"),popoverButton=document.querySelector(".booking-button-popover"),form=document.querySelector(".booking-form"),bookingButton=form.querySelector(".booking-button"),checkIn=form.querySelector("[name=booking-check-in]"),checkOut=form.querySelector("[name=booking-check-out]"),bookingAdults=form.querySelector("[name=booking-adults]"),bookingChildren=form.querySelector("[name=booking-children]"),isEmptyFields=!1,isWrongAmount=!1,isStorageSupport=!0,peopleBooked={};try{peopleBooked.adults=localStorage.getItem("adults"),peopleBooked.children=localStorage.getItem("children")}catch(o){isStorageSupport=!1}function keydownHandler(o){27===o.keyCode&&(o.preventDefault(),popover.classList.remove("booking-popover-show"),popover.classList.add("booking-popover-hide"),popover.classList.remove("booking-popover-error"),window.removeEventListener("keydown",keydownHandler))}popover.classList.remove("booking-popover-show"),popover.classList.add("booking-popover-hide"),popoverButton.addEventListener("click",function(o){o.preventDefault(),popover.classList.remove("booking-popover-error"),popover.classList.contains("booking-popover-show")?window.removeEventListener("keydown",keydownHandler):(window.addEventListener("keydown",keydownHandler),checkIn.focus(),peopleBooked.adults&&peopleBooked.children&&(bookingAdults.value=peopleBooked.adults,bookingChildren.value=peopleBooked.children)),popover.classList.toggle("booking-popover-show"),popover.classList.toggle("booking-popover-hide")}),form.addEventListener("submit",function(o){isEmptyFields=!(checkIn.value&&checkOut.value&&bookingAdults.value&&bookingChildren.value),isWrongAmount=bookingAdults.value<=0||bookingChildren.value<0,isEmptyFields||isWrongAmount?(o.preventDefault(),popover.classList.remove("booking-popover-error"),popover.offsetWidth=popover.offsetWidth,popover.classList.add("booking-popover-error")):isStorageSupport&&(localStorage.setItem("adults",bookingAdults.value),localStorage.setItem("children",bookingChildren.value))});
